DDL_DB


-- Generated by Oracle SQL Developer Data Modeler 20.2.0.167.1538
--   at:        2020-10-04 15:17:42 CST
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g



DROP TABLE cat CASCADE CONSTRAINTS;

DROP TABLE detped CASCADE CONSTRAINTS;

DROP TABLE fact CASCADE CONSTRAINTS;

DROP TABLE ped CASCADE CONSTRAINTS;

DROP TABLE prod CASCADE CONSTRAINTS;

DROP TABLE prodcat CASCADE CONSTRAINTS;

DROP TABLE prodsubcat CASCADE CONSTRAINTS;

DROP TABLE prodtemp CASCADE CONSTRAINTS;

DROP TABLE subcat CASCADE CONSTRAINTS;

DROP TABLE subcatsub CASCADE CONSTRAINTS;

DROP TABLE tar CASCADE CONSTRAINTS;

DROP TABLE temp CASCADE CONSTRAINTS;

DROP TABLE trans CASCADE CONSTRAINTS;

DROP TABLE usu CASCADE CONSTRAINTS;

-- predefined type, no DDL - MDSYS.SDO_GEOMETRY

-- predefined type, no DDL - XMLTYPE

CREATE TABLE cat (
    id_cat  INTEGER NOT NULL,
    nombre  VARCHAR2(50 CHAR) NOT NULL
);

ALTER TABLE cat ADD CONSTRAINT cat_pk PRIMARY KEY ( id_cat );

CREATE TABLE detped (
    id_detped   INTEGER NOT NULL,
    cantidad    INTEGER NOT NULL,
    precio      VARCHAR2(20 CHAR) NOT NULL,
    descuento   VARCHAR2(20 CHAR),
    id_prod     INTEGER NOT NULL,
    ped_id_ven  INTEGER NOT NULL
);

CREATE UNIQUE INDEX detped__idx ON
    detped (
        ped_id_ven
    ASC );

ALTER TABLE detped ADD CONSTRAINT detped_pk PRIMARY KEY ( id_detped );

CREATE TABLE fact (
    id_fact     INTEGER NOT NULL,
    nit         VARCHAR2(30 CHAR),
    serie       VARCHAR2(30 CHAR) NOT NULL,
    fecha       DATE NOT NULL,
    total       VARCHAR2(30 CHAR) NOT NULL,
    usu_id_usu  INTEGER
);

ALTER TABLE fact ADD CONSTRAINT fact_pk PRIMARY KEY ( id_fact );

CREATE TABLE ped (
    id_ven            INTEGER NOT NULL,
    fecha_venta       DATE NOT NULL,
    impuesto          VARCHAR2(15 CHAR) NOT NULL,
    total             VARCHAR2(20 CHAR) NOT NULL,
    estatus           VARCHAR2(20 CHAR) NOT NULL,
    tipo_usuario      VARCHAR2(20 CHAR) NOT NULL,
    id_detped         INTEGER NOT NULL,
    id_usu            INTEGER NOT NULL,
    detped_id_detped  INTEGER NOT NULL
);

CREATE UNIQUE INDEX ped__idx ON
    ped (
        detped_id_detped
    ASC );

ALTER TABLE ped ADD CONSTRAINT ped_pk PRIMARY KEY ( id_ven );

CREATE TABLE prod (
    id_prod           VARCHAR2(30 CHAR) NOT NULL,
    nombre            VARCHAR2(50 CHAR) NOT NULL,
    descripcion       VARCHAR2(50 CHAR) NOT NULL,
    proveedor         VARCHAR2(50),
    precio            VARCHAR2(20 CHAR) NOT NULL,
    existencia        VARCHAR2(20) NOT NULL,
    imagen            BLOB,
    id_cat            INTEGER NOT NULL,
    id_subcat         INTEGER NOT NULL,
    id_temp           INTEGER NOT NULL,
    detped_id_detped  INTEGER
);

ALTER TABLE prod ADD CONSTRAINT prod_pk PRIMARY KEY ( id_prod );

CREATE TABLE prodcat (
    cat_id_cat    INTEGER NOT NULL,
    prod_id_prod  VARCHAR2(30 CHAR) NOT NULL
);

ALTER TABLE prodcat ADD CONSTRAINT prodcat_pk PRIMARY KEY ( cat_id_cat,
                                                            prod_id_prod );

CREATE TABLE prodsubcat (
    subcat_id_subcat  INTEGER NOT NULL,
    prod_id_prod      VARCHAR2(30 CHAR) NOT NULL
);

ALTER TABLE prodsubcat ADD CONSTRAINT prodsubcat_pk PRIMARY KEY ( subcat_id_subcat,
                                                                  prod_id_prod );

CREATE TABLE prodtemp (
    temp_id_temp  INTEGER NOT NULL,
    prod_id_prod  VARCHAR2(30 CHAR) NOT NULL
);

ALTER TABLE prodtemp ADD CONSTRAINT prodtemp_pk PRIMARY KEY ( temp_id_temp,
                                                              prod_id_prod );

CREATE TABLE subcat (
    id_subcat  INTEGER NOT NULL,
    nombre     VARCHAR2(50 CHAR) NOT NULL
);

ALTER TABLE subcat ADD CONSTRAINT subcat_pk PRIMARY KEY ( id_subcat );

CREATE TABLE subcatsub (
    subcat_id_subcat   INTEGER NOT NULL,
    subcat_id_subcat1  INTEGER NOT NULL
);

ALTER TABLE subcatsub ADD CONSTRAINT subcatsub_pk PRIMARY KEY ( subcat_id_subcat,
                                                                subcat_id_subcat1 );

CREATE TABLE tar (
    id_tar             INTEGER NOT NULL,
    numero             INTEGER NOT NULL,
    fecha_vencimiento  DATE NOT NULL,
    cvv                INTEGER NOT NULL,
    saldo              VARCHAR2(30 CHAR) NOT NULL,
    usu_id_usu         INTEGER
);

ALTER TABLE tar ADD CONSTRAINT tar_pk PRIMARY KEY ( id_tar );

CREATE TABLE temp (
    id_temp       INTEGER NOT NULL,
    nombre        VARCHAR2(50 CHAR) NOT NULL,
    descripcion   VARCHAR2(50 CHAR),
    fecha_inicio  DATE NOT NULL,
    fecha_fin     DATE NOT NULL
);

ALTER TABLE temp ADD CONSTRAINT temp_pk PRIMARY KEY ( id_temp );

CREATE TABLE trans (
    id_trans    INTEGER NOT NULL,
    estatus     VARCHAR2(30 CHAR) NOT NULL,
    total       VARCHAR2(30 CHAR) NOT NULL,
    usu_id_usu  INTEGER
);

ALTER TABLE trans ADD CONSTRAINT trans_pk PRIMARY KEY ( id_trans );

CREATE TABLE usu (
    id_usu         INTEGER NOT NULL,
    nombre         VARCHAR2(50 CHAR) NOT NULL,
    apellido       VARCHAR2(50 CHAR) NOT NULL,
    edad           INTEGER NOT NULL,
    sexo           VARCHAR2(20 CHAR),
    email          VARCHAR2(30 CHAR) NOT NULL,
    codigo_postal  VARCHAR2(30 CHAR),
    nacionalidad   VARCHAR2(30 CHAR) NOT NULL,
    rol            VARCHAR2(25),
    contrasena     VARCHAR2(30 CHAR),
    ped_id_ven     INTEGER NOT NULL,
    id_trans       INTEGER NOT NULL,
    id_fact        INTEGER NOT NULL,
    id_tar         INTEGER
);

ALTER TABLE usu ADD CONSTRAINT usu_pk PRIMARY KEY ( id_usu );

ALTER TABLE detped
    ADD CONSTRAINT detped_ped_fk FOREIGN KEY ( ped_id_ven )
        REFERENCES ped ( id_ven );

ALTER TABLE fact
    ADD CONSTRAINT fact_usu_fk FOREIGN KEY ( usu_id_usu )
        REFERENCES usu ( id_usu );

ALTER TABLE ped
    ADD CONSTRAINT ped_detped_fk FOREIGN KEY ( detped_id_detped )
        REFERENCES detped ( id_detped );

ALTER TABLE prod
    ADD CONSTRAINT prod_detped_fk FOREIGN KEY ( detped_id_detped )
        REFERENCES detped ( id_detped );

ALTER TABLE prodcat
    ADD CONSTRAINT prodcat_cat_fk FOREIGN KEY ( cat_id_cat )
        REFERENCES cat ( id_cat );

ALTER TABLE prodcat
    ADD CONSTRAINT prodcat_prod_fk FOREIGN KEY ( prod_id_prod )
        REFERENCES prod ( id_prod );

ALTER TABLE prodsubcat
    ADD CONSTRAINT prodsubcat_prod_fk FOREIGN KEY ( prod_id_prod )
        REFERENCES prod ( id_prod );

ALTER TABLE prodsubcat
    ADD CONSTRAINT prodsubcat_subcat_fk FOREIGN KEY ( subcat_id_subcat )
        REFERENCES subcat ( id_subcat );

ALTER TABLE prodtemp
    ADD CONSTRAINT prodtemp_prod_fk FOREIGN KEY ( prod_id_prod )
        REFERENCES prod ( id_prod );

ALTER TABLE prodtemp
    ADD CONSTRAINT prodtemp_temp_fk FOREIGN KEY ( temp_id_temp )
        REFERENCES temp ( id_temp );

ALTER TABLE subcatsub
    ADD CONSTRAINT subcatsub_subcat_fk FOREIGN KEY ( subcat_id_subcat )
        REFERENCES subcat ( id_subcat );

ALTER TABLE subcatsub
    ADD CONSTRAINT subcatsub_subcat_fkv1 FOREIGN KEY ( subcat_id_subcat1 )
        REFERENCES subcat ( id_subcat );

ALTER TABLE tar
    ADD CONSTRAINT tar_usu_fk FOREIGN KEY ( usu_id_usu )
        REFERENCES usu ( id_usu );

ALTER TABLE trans
    ADD CONSTRAINT trans_usu_fk FOREIGN KEY ( usu_id_usu )
        REFERENCES usu ( id_usu );

ALTER TABLE usu
    ADD CONSTRAINT usu_ped_fk FOREIGN KEY ( ped_id_ven )
        REFERENCES ped ( id_ven );



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            14
-- CREATE INDEX                             2
-- ALTER TABLE                             29
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
